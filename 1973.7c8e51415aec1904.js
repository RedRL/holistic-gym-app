"use strict";(self.webpackChunkbrain_power=self.webpackChunkbrain_power||[]).push([[1973],{1973:(O,p,r)=>{r.r(p),r.d(p,{MusicSessionComponent:()=>k});var c=r(177),d=r(3025),u=r(9112),e=r(4438),g=r(70),f=r(5096);const m=["musicVideo"];function _(n,a){1&n&&(e.qSk(),e.j41(0,"svg",11),e.nrm(1,"path",32),e.k0s())}function h(n,a){1&n&&(e.qSk(),e.j41(0,"svg",11),e.nrm(1,"path",33),e.k0s())}function b(n,a){1&n&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"t"),e.k0s()),2&n&&(e.R7$(),e.JRh(e.bMT(2,1,"play_video")))}function M(n,a){1&n&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"t"),e.k0s()),2&n&&(e.R7$(),e.JRh(e.bMT(2,1,"pause_video")))}function x(n,a){1&n&&(e.qSk(),e.j41(0,"svg",11),e.nrm(1,"path",34),e.k0s())}function v(n,a){1&n&&(e.qSk(),e.j41(0,"svg",11),e.nrm(1,"path",35),e.k0s())}function C(n,a){1&n&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"t"),e.k0s()),2&n&&(e.R7$(),e.JRh(e.bMT(2,1,"enter_fullscreen")))}function P(n,a){1&n&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"t"),e.k0s()),2&n&&(e.R7$(),e.JRh(e.bMT(2,1,"exit_fullscreen")))}function w(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",36)(1,"div",37)(2,"div",38),e.EFF(3,"\u{1f389}"),e.k0s(),e.j41(4,"h2"),e.EFF(5),e.nI1(6,"t"),e.k0s(),e.j41(7,"p"),e.EFF(8),e.nI1(9,"t"),e.k0s(),e.j41(10,"button",39),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.goBack())}),e.EFF(11),e.nI1(12,"t"),e.k0s()()()}2&n&&(e.R7$(5),e.JRh(e.bMT(6,3,"congratulations")),e.R7$(3),e.JRh(e.bMT(9,5,"video_completed_message")),e.R7$(3),e.SpI(" ",e.bMT(12,7,"continue")," "))}let k=(()=>{class n{constructor(t,i){this.router=t,this.translateService=i,this.maxWatchedTime=0,this.currentTime=0,this.duration=0,this.progressPercentage=0,this.showCongratulations=!1,this.isPlaying=!1,this.isFullscreen=!1}onVideoLoaded(){this.duration=this.musicVideo.nativeElement.duration}onTimeUpdate(){this.currentTime=this.musicVideo.nativeElement.currentTime,this.currentTime>this.maxWatchedTime&&(this.maxWatchedTime=this.currentTime),this.progressPercentage=this.maxWatchedTime/this.duration*100,this.maxWatchedTime>=this.duration-1&&!this.showCongratulations&&(this.showCongratulations=!0,this.markMusicSessionCompleted())}onPlay(){this.isPlaying=!0}onPause(){this.isPlaying=!1}togglePlayPause(){const t=this.musicVideo.nativeElement;t.paused?t.play():t.pause()}rewind5Seconds(){const t=this.musicVideo.nativeElement;t.currentTime=Math.max(0,t.currentTime-5)}toggleFullscreen(){const t=document.querySelector(".video-wrapper");this.isFullscreen?(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen&&document.mozCancelFullScreen(),this.isFullscreen=!1):(t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen&&t.mozRequestFullScreen(),this.isFullscreen=!0)}markMusicSessionCompleted(){const t=(new Date).toISOString().split("T")[0];localStorage.setItem("musicSessionCompleted",t)}goBack(){this.router.navigate(["/lets-begin"])}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(g.Ix),e.rXU(f.c))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-music-session"]],viewQuery:function(i,o){if(1&i&&e.GBs(m,5),2&i){let s;e.mGM(s=e.lsd())&&(o.musicVideo=s.first)}},standalone:!0,features:[e.aNF],decls:68,vars:46,consts:[["videoContainer",""],["musicVideo",""],[3,"title"],[1,"content"],[1,"video-wrapper"],[1,"video-frame"],["controls","","crossorigin","anonymous",1,"music-video",3,"timeupdate","loadedmetadata","play","pause"],["src","https://brain-power-app.s3.eu-north-1.amazonaws.com/Mozart-heb.mp4","type","video/mp4"],[1,"custom-controls"],[1,"control-wrapper","rewind-wrapper"],["aria-label","Rewind 5 seconds",1,"control-btn",3,"click"],["width","32","height","32","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M12 5V1L7 6L12 11V7C15.31 7 18 9.69 18 13C18 16.31 15.31 19 12 19C8.69 19 6 16.31 6 13H4C4 17.42 7.58 21 12 21C16.42 21 20 17.42 20 13C20 8.58 16.42 5 12 5Z","fill","currentColor"],["x","12","y","16","text-anchor","middle","font-size","9","fill","currentColor","font-weight","bold"],[1,"tooltip","tooltip-left"],[1,"tooltip-arrow"],[1,"control-wrapper","play-wrapper"],[1,"control-btn",3,"click"],["width","32","height","32","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],[1,"tooltip","tooltip-bottom"],[4,"ngIf"],[1,"control-wrapper","fullscreen-wrapper"],[1,"tooltip","tooltip-right"],[1,"progress-container"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],["class","congratulations-overlay",4,"ngIf"],[1,"session-info"],[1,"fullscreen-overlay"],[1,"fullscreen-content"],[1,"fullscreen-instructions"],["d","M8 5V19L19 12L8 5Z","fill","currentColor"],["d","M6 4H10V20H6V4ZM14 4H18V20H14V4Z","fill","currentColor"],["d","M7 14H5V19H10V17H7V14ZM5 10H7V7H10V5H5V10ZM17 17H14V19H19V14H17V17ZM14 5V7H17V10H19V5H14Z","fill","currentColor"],["d","M5 16H8V19H10V14H5V16ZM8 8H5V10H10V5H8V8ZM14 19H16V16H19V14H14V19ZM16 8V5H14V10H19V8H16Z","fill","currentColor"],[1,"congratulations-overlay"],[1,"congratulations-card"],[1,"congrats-icon"],[1,"btn-primary",3,"click"]],template:function(i,o){if(1&i){const s=e.RV6();e.nrm(0,"app-header",2),e.nI1(1,"t"),e.j41(2,"section",3)(3,"div",4,0)(5,"div",5)(6,"video",6,1),e.bIt("timeupdate",function(){return e.eBV(s),e.Njj(o.onTimeUpdate())})("loadedmetadata",function(){return e.eBV(s),e.Njj(o.onVideoLoaded())})("play",function(){return e.eBV(s),e.Njj(o.onPlay())})("pause",function(){return e.eBV(s),e.Njj(o.onPause())}),e.nrm(8,"source",7),e.j41(9,"p"),e.EFF(10),e.nI1(11,"t"),e.k0s()()(),e.j41(12,"div",8)(13,"div",9)(14,"button",10),e.bIt("click",function(){return e.eBV(s),e.Njj(o.rewind5Seconds())}),e.qSk(),e.j41(15,"svg",11),e.nrm(16,"path",12),e.j41(17,"text",13),e.EFF(18,"5"),e.k0s()()(),e.joV(),e.j41(19,"div",14),e.nrm(20,"div",15),e.j41(21,"span"),e.EFF(22),e.nI1(23,"t"),e.k0s()()(),e.j41(24,"div",16)(25,"button",17),e.bIt("click",function(){return e.eBV(s),e.Njj(o.togglePlayPause())}),e.DNE(26,_,2,0,"svg",18)(27,h,2,0,"svg",18),e.k0s(),e.j41(28,"div",19),e.nrm(29,"div",15),e.DNE(30,b,3,3,"span",20)(31,M,3,3,"span",20),e.k0s()(),e.j41(32,"div",21)(33,"button",17),e.bIt("click",function(){return e.eBV(s),e.Njj(o.toggleFullscreen())}),e.DNE(34,x,2,0,"svg",18)(35,v,2,0,"svg",18),e.k0s(),e.j41(36,"div",22),e.nrm(37,"div",15),e.DNE(38,C,3,3,"span",20)(39,P,3,3,"span",20),e.k0s()()()(),e.j41(40,"div",23)(41,"div",24),e.nrm(42,"div",25),e.k0s(),e.j41(43,"div",26)(44,"span"),e.EFF(45),e.nI1(46,"t"),e.nI1(47,"number"),e.k0s()()(),e.DNE(48,w,13,9,"div",27),e.j41(49,"div",28)(50,"h3"),e.EFF(51),e.nI1(52,"t"),e.k0s(),e.j41(53,"p"),e.EFF(54),e.nI1(55,"t"),e.k0s()(),e.j41(56,"div",29)(57,"div",30)(58,"h3"),e.EFF(59),e.nI1(60,"t"),e.k0s(),e.j41(61,"p"),e.EFF(62),e.nI1(63,"t"),e.k0s(),e.j41(64,"div",31)(65,"p"),e.EFF(66),e.nI1(67,"t"),e.k0s()()()()()}2&i&&(e.Y8G("title",e.bMT(1,25,"music_session")),e.R7$(10),e.JRh(e.bMT(11,27,"video_not_supported")),e.R7$(2),e.AVh("rtl","he"===o.translateService.lang),e.R7$(10),e.JRh(e.bMT(23,29,"rewind_5_seconds")),e.R7$(3),e.BMQ("aria-label",o.isPlaying?"Pause":"Play"),e.R7$(),e.Y8G("ngIf",!o.isPlaying),e.R7$(),e.Y8G("ngIf",o.isPlaying),e.R7$(3),e.Y8G("ngIf",!o.isPlaying),e.R7$(),e.Y8G("ngIf",o.isPlaying),e.R7$(2),e.BMQ("aria-label",o.isFullscreen?"Exit Fullscreen":"Enter Fullscreen"),e.R7$(),e.Y8G("ngIf",!o.isFullscreen),e.R7$(),e.Y8G("ngIf",o.isFullscreen),e.R7$(3),e.Y8G("ngIf",!o.isFullscreen),e.R7$(),e.Y8G("ngIf",o.isFullscreen),e.R7$(3),e.xc7("width",o.progressPercentage,"%"),e.R7$(3),e.Lme("",e.bMT(46,31,"video_progress"),": ",e.i5U(47,33,o.progressPercentage,"1.0-0"),"%"),e.R7$(3),e.Y8G("ngIf",o.showCongratulations),e.R7$(3),e.JRh(e.bMT(52,36,"music_session")),e.R7$(3),e.JRh(e.bMT(55,38,"mozart_video_description")),e.R7$(5),e.JRh(e.bMT(60,40,"music_session")),e.R7$(3),e.JRh(e.bMT(63,42,"music_session_description")),e.R7$(4),e.JRh(e.bMT(67,44,"fullscreen_instructions")))},dependencies:[c.MD,c.bT,c.QX,d.y,u.Z],styles:[".content[_ngcontent-%COMP%]{padding:24px;max-width:900px;margin:0 auto}.video-wrapper[_ngcontent-%COMP%]{position:relative;background:#0000004d;border-radius:20px;padding:20px;margin-bottom:24px;backdrop-filter:blur(10px)}.video-frame[_ngcontent-%COMP%]{position:relative;overflow:hidden;border-radius:12px;margin-bottom:16px}.music-video[_ngcontent-%COMP%]{width:100%;height:auto;max-height:500px;display:block;border-radius:12px;box-shadow:0 8px 32px #0000004d;background:#000}@media (max-width: 768px){.music-video[_ngcontent-%COMP%]{max-height:300px}}.custom-controls[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:center;align-items:center;padding:12px;background:#ffffff1a;backdrop-filter:blur(10px);border-radius:12px;border:1px solid rgba(255,255,255,.2)}.custom-controls.rtl[_ngcontent-%COMP%]{flex-direction:row-reverse}.control-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center}.control-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:56px;height:56px;background:#ffffff26;border:2px solid rgba(255,255,255,.3);border-radius:12px;cursor:pointer;transition:all .3s ease;color:#fff;backdrop-filter:blur(5px)}.control-btn[_ngcontent-%COMP%]:hover{background:#ffffff40;border-color:#ffffff80;transform:scale(1.05);box-shadow:0 4px 12px #0000004d}.control-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.control-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.tooltip[_ngcontent-%COMP%]{position:absolute;background:linear-gradient(135deg,#d97706,#f59e0b);color:#fff;padding:8px 16px;border-radius:8px;font-size:.85rem;font-weight:500;white-space:pre-line;text-align:center;line-height:1.4;opacity:1;pointer-events:none;transition:opacity .3s ease;z-index:1000;box-shadow:0 4px 12px #d9770666;width:max-content;min-width:100px}.tooltip-bottom[_ngcontent-%COMP%]{bottom:-45px;left:50%;transform:translate(-50%) translateY(5px)}.tooltip-left[_ngcontent-%COMP%]{bottom:-65px;right:15px;transform:translateY(5px)}.tooltip-right[_ngcontent-%COMP%]{bottom:-65px;left:15px;transform:translateY(5px)}.tooltip-arrow[_ngcontent-%COMP%]{position:absolute;top:-6px;width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:6px solid #D97706}.tooltip-bottom[_ngcontent-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]{left:50%;transform:translate(-50%)}.tooltip-left[_ngcontent-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]{right:20px}.tooltip-right[_ngcontent-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]{left:20px}[_ngcontent-%COMP%]:fullscreen   .progress-container[_ngcontent-%COMP%], [_ngcontent-%COMP%]:-webkit-full-screen   .progress-container[_ngcontent-%COMP%], [_ngcontent-%COMP%]:-moz-full-screen   .progress-container[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;z-index:10000;border-radius:0;background:#000c;backdrop-filter:blur(20px)}.progress-container[_ngcontent-%COMP%]{background:#ffffff1a;backdrop-filter:blur(20px);border-radius:20px;padding:20px;border:1px solid rgba(255,255,255,.2);margin:50px 0 24px}.progress-bar[_ngcontent-%COMP%]{width:100%;height:12px;background:#0000004d;border-radius:12px;overflow:hidden;position:relative;box-shadow:inset 0 2px 4px #0000004d}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#d97706,#f59e0b,#fbbf24);border-radius:12px;transition:width .3s ease;box-shadow:0 0 10px #fbbf2480}.progress-text[_ngcontent-%COMP%]{margin-top:12px;text-align:center;color:#fff;font-size:.9rem;font-weight:600;text-shadow:0 2px 4px rgba(0,0,0,.3)}.session-info[_ngcontent-%COMP%]{background:#ffffff1a;backdrop-filter:blur(20px);border-radius:20px;padding:24px;border:1px solid rgba(255,255,255,.2);text-align:center;margin-bottom:24px}.session-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800;margin:0 0 12px;color:#fff;text-shadow:0 2px 4px rgba(0,0,0,.3)}.session-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffe6;font-size:1rem;line-height:1.6;margin:0 0 12px}.fullscreen-overlay[_ngcontent-%COMP%]{display:none}[_ngcontent-%COMP%]:fullscreen   .fullscreen-overlay[_ngcontent-%COMP%], [_ngcontent-%COMP%]:-webkit-full-screen   .fullscreen-overlay[_ngcontent-%COMP%], [_ngcontent-%COMP%]:-moz-full-screen   .fullscreen-overlay[_ngcontent-%COMP%]{display:block}.fullscreen-content[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;max-height:40vh;overflow-y:auto;background:linear-gradient(to top,rgba(0,0,0,.8) 0%,rgba(0,0,0,.4) 50%,transparent 100%);padding:20px;color:#fff}.fullscreen-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;margin:0 0 12px;text-shadow:0 2px 4px rgba(0,0,0,.8)}.fullscreen-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffe6;font-size:1rem;margin:0 0 12px;text-shadow:0 1px 2px rgba(0,0,0,.8);line-height:1.5}.fullscreen-instructions[_ngcontent-%COMP%]{margin-top:12px;padding-top:12px;border-top:1px solid rgba(255,255,255,.2)}.fullscreen-instructions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:#ffffffb3;font-style:italic;margin:0}"]})}}return n})()}}]);